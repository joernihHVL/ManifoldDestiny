---
title: ""
output: github_document
always_allow_html: true
execute: 
  cache: false
filters:
  - webr
---


```{r}
# script/R/simulations.R
```


1.

```{webr-r}
fit = lm(mpg ~ am, data = mtcars)
summary(fit)
```


```{r,echo=F}
knitr::knit_exit()
```








[Coatless](https://www.youtube.com/watch?v=PZx9d21HnTo)


@thecoatlessprofessor7674
1 month ago
Great question. The short gist is yes in the *interactive* context for now.

We'll likely need to make another extension that wraps before {quarto-webr} and {quarto-pyodide} to enable cross talk in the *non-interactive**/**output* contexts.


# Python

<head>
  <script src="https://cdn.jsdelivr.net/pyodide/v0.24.1/full/pyodide.js"></script>
</head>

<body>
  <p>
    You can execute any Python code. Just enter something in the box below and
    click the button.
  </p>
  <input id="code" value="sum([1, 2, 3, 4, 5])" />
  <button onclick="evaluatePython()">Run</button>
  <br />
  <br />
  <div>Output:</div>
  <textarea id="output" style="width: 100%;" rows="6" disabled></textarea>

  <script>
    const output = document.getElementById("output");
    const code = document.getElementById("code");

    function addToOutput(s) {
      output.value += ">>>" + code.value + "\n" + s + "\n";
    }

    output.value = "Initializing...\n";
    // init Pyodide
    async function main() {
      let pyodide = await loadPyodide();
      output.value += "Ready!\n";
      return pyodide;
    }
    let pyodideReadyPromise = main();

    async function evaluatePython() {
      let pyodide = await pyodideReadyPromise;
      try {
        let output = pyodide.runPython(code.value);
        addToOutput(output);
      } catch (err) {
        addToOutput(err);
      }
    }
  </script>
</body>


# R

<div>
  <pre><code id="out">Loading webR, please wait...</code></pre>
  <input spellcheck="false" autocomplete="off" id="input" type="text">
  <button onclick="globalThis.sendInput()" id="run">Run</button>
</div>

<script type="module">
  /* Create a webR console using the Console helper class */
  import { Console } from 'https://webr.r-wasm.org/latest/webr.mjs';
  const webRConsole = new Console({
    stdout: line => document.getElementById('out').append(line + '\n'),
    stderr: line => document.getElementById('out').append(line + '\n'),
    prompt: p => document.getElementById('out').append(p),
  });
  webRConsole.run();
  
  /* Write to the webR console using the ``stdin()`` method */
  let input = document.getElementById('input');
  globalThis.sendInput = () => {
    webRConsole.stdin(input.value);
    document.getElementById('out').append(input.value + '\n');
    input.value = "";
  }
  
  /* Send input on Enter key */
  input.addEventListener(
    "keydown",
    (evt) => {if(evt.keyCode === 13) globalThis.sendInput()}
  );
</script>








